<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>API EscuelaJS - Productos</title>
  <link rel="stylesheet" href="style/style.css" />
</head>
<body>

  <header>
    <h1>platzi fake api</h1>
  </header>

  <main>

    <section id="descripcion-api" class="info-api">
      <img src="img/apifafe.png" alt="Logo API EscuelaJS" class="logo-api" />
      <div class="descripcion-cuadro">
        <h2>Acerca de la API</h2>
        <p>
          Esta API pública provee datos de productos reales para practicar 
          desarrollo web y consumir servicios REST con JavaScript.
        </p>
      </div>
    </section>

    <section id="controls" class="controls">
      <input type="text" id="buscador" placeholder="Buscar productos..." aria-label="Buscar productos" />
      
      <select id="filtro-categoria" aria-label="Filtrar por categoría">
        <option value="">Todas las categorías</option>
      </select>
    </section>

    <section id="productos" class="productos" aria-live="polite" aria-label="Lista de productos">
      <!-- Productos cargados dinámicamente aquí -->
    </section>

    <section id="favoritos" class="favoritos">
      <h2>Favoritos</h2>
      <div id="lista-favoritos" aria-live="polite" aria-label="Lista de productos favoritos">
        <!-- Favoritos cargados dinámicamente -->
      </div>
    </section>

  </main>
  <form id="miFormulario">
    <label>Nombre:
      <input type="text" name="nombre" required />
    </label><br/>
    <label>Apellido:
      <input type="text" name="apellido" required />
    </label><br/>
    <label>Correo:
      <input type="email" name="correo" required />
    </label><br/>
    <label>Teléfono:
      <input type="tel" name="telefono" required />
    </label><br/>
    <label>Dirección:
      <input type="text" name="direccion" required />
    </label><br/>
    <label>Ciudad:
      <input type="text" name="ciudad" required />
    </label><br/>
    <label>Comentario:
      <textarea name="comentario" rows="3" required></textarea>
    </label><br/>
    <button type="submit">Enviar</button>
  </form>
  <div id="mensaje"></div>
  <!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
  // Configuración de Firebase (tuya)
  const firebaseConfig = {
    apiKey: "AIzaSyD159PzqzNXQpMutpECpWzJcQ_62_DSnYU",
    authDomain: "tiendaplatzi-a6241.firebaseapp.com",
    projectId: "tiendaplatzi-a6241",
    storageBucket: "tiendaplatzi-a6241.firebasestorage.app",
    messagingSenderId: "286259925506",
    appId: "1:286259925506:web:71ed6f6a489aa197b9cd1b"
  };

  // Inicializar Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Referencia al formulario y mensaje
  const form = document.getElementById('miFormulario');
  const mensajeDiv = document.getElementById('mensaje');

  form.addEventListener('submit', e => {
    e.preventDefault();

    // Tomar datos del formulario
    const datos = {
      nombre: form.nombre.value.trim(),
      apellido: form.apellido.value.trim(),
      correo: form.correo.value.trim(),
      telefono: form.telefono.value.trim(),
      direccion: form.direccion.value.trim(),
      ciudad: form.ciudad.value.trim(),
      comentario: form.comentario.value.trim(),
      fecha: new Date()
    };

    // Guardar en Firestore en colección 'usuarios'
    db.collection('usuarios').add(datos)
      .then(() => {
        mensajeDiv.textContent = 'Datos guardados correctamente ✅';
        mensajeDiv.style.color = 'lightgreen';
        form.reset();
      })
      .catch(error => {
        mensajeDiv.textContent = 'Error al guardar: ' + error.message;
        mensajeDiv.style.color = 'red';
      });
  });
</script>

  

  <footer>
    <div class="footer-content">
      <p><strong>Estudiante:</strong> Angie Rincon</p>
      <p><strong>GitHub:</strong> <a href="https://github.com/angierincont" target="_blank" rel="noopener noreferrer">angierincont</a></p>
      <p><strong>Versión de la app:</strong> V.1.0.0</p>
    </div>
  </footer>

  <script type="module" src="js/api.js"></script>
  <script type="module" src="js/buscador.js"></script>
  <script type="module" src="js/filtro.js"></script>
  <script src="js/favoritos.js"></script>

</body>
</html>
